<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Premium care for you</title>
    
    <!-- Cloudflare optimization exclusions to prevent JS parsing errors -->
    <meta name="cf-2fa-verify" content="false" />
    <meta name="cf-rocket-loader-disable" content="dojah" />
    
    <!-- Content Security Policy to control script loading -->
    <meta http-equiv="Content-Security-Policy" content="
      default-src 'self' https:;
      script-src 'self' 'unsafe-inline' 'unsafe-eval' https://identity.dojah.io;
      frame-src 'self' https://identity.dojah.io https://api.dojah.io;
      img-src 'self' data: https:;
      style-src 'self' 'unsafe-inline' https:;
      connect-src 'self' https: wss: ws:;
      font-src 'self' https:;
      media-src 'self' https:;
    ">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" />
    
    <!-- Block problematic Dojah scripts that cause global ENV/Dojah errors -->
    <script data-cfasync="false">
      // Completely disable Cloudflare Rocket Loader
      window.__CF_DISABLE_ROCKET_LOADER__ = true;
      
      // Override console.error for Dojah-related errors to prevent spam
      const originalConsoleError = console.error;
      console.error = function(...args) {
        const message = args.join(' ');
        
        // Suppress known Dojah global variable errors
        if (message.includes('ENV is not defined') || 
            message.includes('Dojah is not defined') ||
            message.includes('posthog.dojah.services')) {
          console.warn('ÔøΩ Suppressed Dojah error:', message);
          return;
        }
        
        return originalConsoleError.apply(console, args);
      };
      
      // Provide minimal ENV and Dojah globals to prevent errors
      window.ENV = {
        ENVIRONMENT: 'development',
        API_URL: 'https://care-pro-node-api.onrender.com',
        DEBUG: true
      };
      
      window.Dojah = {
        initialized: true,
        config: {},
        utils: {
          addCountries: function() {
            console.log('üåç Mock addCountries - preventing script conflicts');
          }
        }
      };
      
      console.log('üõ°Ô∏è Dojah script conflict prevention initialized');
    </script>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.jsx"></script>
  </body>
</html>
